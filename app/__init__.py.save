import os

from flask import Flask
from flask_sqlalchemy import SQLAlchemy

from config import Config

db = SQLAlchemy()

def create_app(config_class=Config):
	app = Flask(__name__, instance_relative_config=True	app.config.from_mapping(
		SECRET_KEY=b"]s\xf8\xbb\x89\xda\xc5_\xbb\x97\xf9\x19H/\xe1F",
        SQLALCHEMY_DATABASE_URI = "sqlite:///spelling.sqlite3",
        SQLALCHEMY_TRACK_MODIFICATIONS = False
	)

	if test_config is None:
		app.config.from_pyfile("config.py", silent=True)
	else:
		app.config.from_mapping(test_config)

	try:
		os.makedirs(app.instance_path)
	except OSError:
		pass

	db.init_app(app)

	from .models import Score, Word
	db.create_all(app=app)

	from .import quiz
	app.register_blueprint(quiz.bp)

	return app

